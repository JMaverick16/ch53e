<?xml version="1.0" encoding="UTF-8"?>

<PropertyList>

  <path>ch53e.ac</path>

<animation n="900">
    <type>scale</type>
    <property>constants/zero</property>
    <x-offset>1.25581</x-offset>
    <y-offset>1.25581</y-offset>
    <z-offset>1.25581</z-offset>
 </animation>
 
 <offsets>
<x-m>0</x-m>
<z-m>0.3</z-m>
<heading-deg>0</heading-deg>
</offsets>

  
  
  
   <!-- MP sound call -->
  <sound><path>Aircraft/ch53e/Sounds/mp-sound.xml</path></sound>

    <nasal>
        <load>
            var livery_update = aircraft.livery_update.new("Aircraft/ch53e/Models/Liveries", 10 );
          
		  var self = cmdarg();
			
	var float_8 = self.getNode("sim/multiplay/generic/float[8]", 1);				
     var float_7 = self.getNode("sim/multiplay/generic/float[7]", 1);
      var float_6 = self.getNode("sim/multiplay/generic/float[6]", 1);
      var float_5 = self.getNode("sim/multiplay/generic/float[5]", 1);
	
	
	 var ramp_door = self.getNode("instrumentation/doors/ramp/position-norm", 1);
       var crew_door = self.getNode("instrumentation/doors/crew/position-norm", 1);
      var passenger_door = self.getNode("instrumentation/doors/passenger/position-norm", 1);
	   var wings_door = self.getNode("instrumentation/doors/wings/position-norm", 1);
    
      wings_door.alias(float_8);
	  ramp_door.alias(float_7);
	  crew_door.alias(float_6);
      passenger_door.alias(float_5);
           
        <![CDATA[
var root = cmdarg();
var rootindex = root.getIndex();
srand(); #set seed for random generator

#flame Rembrandt light brightness alternation
var flamePath = "/ai/models/multiplayer["~ rootindex ~"]/sim/model/V-1/";
props.globals.initNode(flamePath ~ "flameBright", 0.0, "DOUBLE");
var flameSeq = [0,0,0,0];
var curSeq = 0;
var flameBright = func {
	flameSeq[curSeq] = 0.5 + rand()*0.5;
	
	setprop(flamePath ~ "flameBright", 
		(flameSeq[0]+flameSeq[1]+flameSeq[2]+flameSeq[3]) / 4);
	
	if( curSeq < 3)
		curSeq += 1;
	else
		curSeq = 0;
		
	settimer(flameBright, 0.02);
}

settimer(flameBright, 0.02);


var mpPath = "/ai/models/multiplayer["~ rootindex ~"]/";

var lightsPath = mpPath~"lightpack/"; #path to the property node, where all internal values are placed

props.globals.initNode(mpPath~"sim/is-MP-Aircraft", 1, "BOOL");
      
srand();
#wherever you want to add randomization of time, use something like:  + rand()*0.05-0.025 (included by default where appropriate)


#list of switches for lights - if you don't intend to use some light, assign it nil value instead, like whateverSwitch = nil; and you don't need to care about anything else
#IMPORTANT: don't put / on the start of the string, it's already included in the mpPath property
var navSwitch = mpPath~"controls/lighting/nav-lights-switch";
var beaconSwitch = mpPath~"controls/lighting/beacon-switch";
var strobeSwitch = mpPath~"controls/lighting/strobe-switch";
var landingSwitch = mpPath~"controls/lighting/landing-lights-switch";
var taxiSwitch = nil;
var probeSwitch = nil;
var whiteSwitch = nil;


#I need to set listener on some MP transferred properties; this doesn't seem to work well sometimes, so I mirror them to the original location on any change
#This also simplifies work as I can use almost the same code for MP as is the local Nasal. Furthermore, I can use meaningful property names in the model XML files instead of referencing the MP properties. 
var mpVar = {
	new: func(propIn, propOut) {
		var m = { parents: [mpVar] };
		m.propIn = propIn;
		m.propOut = propOut;
		if(propIn==nil or propOut==nil) return m;
		m.value = getprop(propIn);
		setprop(propOut, m.value);
		return m;
	},
	check: func {
		if(me.propIn==nil or me.propOut==nil) return;
		var newValue = getprop(me.propIn);
		if(newValue != me.value) {
			setprop(me.propOut, newValue);
			me.value = newValue;
			#print("value of "~me.propOut~" changed: "~newValue);
		}
	},
};
#init any property copy object needed in this array (anything you need to transfer over MP, but you are using the original paths in your xmls)
#also used for properties you are using a listener on, or properties which you maybe want to manipulate during the <unload> 
#if you're just using the pack, change the values according to the MP bindings in the -set.xml file
#you don't need to delete the entries if the path is nil - it gets skipped automatically and the MP path is just ignored
var mirrorValues = [
	mpVar.new(mpPath~"sim/multiplay/generic/int[7]", mpPath~"sim/crashed"),
	mpVar.new(mpPath~"sim/multiplay/generic/int[0]", navSwitch),
	mpVar.new(mpPath~"sim/multiplay/generic/int[1]", beaconSwitch),
	mpVar.new(mpPath~"sim/multiplay/generic/int[1]", strobeSwitch),
	mpVar.new(mpPath~"sim/multiplay/generic/int[2]", landingSwitch),
	mpVar.new(mpPath~"sim/multiplay/generic/int[3]", taxiSwitch),
	mpVar.new(mpPath~"sim/multiplay/generic/int[3]", probeSwitch),
	mpVar.new(mpPath~"sim/multiplay/generic/int[0]", whiteSwitch),
];
#loop at the default MP transfer frequency (10Hz)
var mirrorTimer = maketimer(0.1, func {
	foreach(var mir; mirrorValues) {
		mir.check();
	}
});
mirrorTimer.start();



#### NAV LIGHTS ####

#class for a periodic fade in/out animation - for flashing, use rather standard aircraft.light.new(), as in Beacon and Strobe section
var lightCycle = {
	#constructor
	new: func(propSwitch, propOut) {
		m = { parents: [lightCycle] };
		props.globals.initNode(propOut, 0, "DOUBLE");
		props.globals.initNode(propSwitch, 1, "BOOL");
		m.fadeIn = 0.4 + rand()*0.05-0.025; #fade in time
		m.fadeOut = 0.4 + rand()*0.05-0.025; #fade out time
		m.stayOn = 1.5 + rand()*0.05-0.025; #stable on period
		m.stayOff = 1 + rand()*0.05-0.025; #stable off period
		m.turnOff = 0.12; #fade out time when turned off
		m.phase = 0; #phase to be run on next timer call: 0 -> fade in, 1 -> stay on, 2 -> fade out, 3 -> stay off
		m.cycleTimer = maketimer(0.1, func {
			if(getprop(propSwitch)) {
				if(m.phase == 0) {
					interpolate(propOut, 1, m.fadeIn);
					m.phase = 1;
					m.cycleTimer.restart(m.fadeIn);
				}
				else if(m.phase == 1){
					m.phase = 2;
					m.cycleTimer.restart(m.stayOn);
				}
				else if(m.phase == 2){
					interpolate(propOut, 0, m.fadeOut);
					m.phase = 3;
					m.cycleTimer.restart(m.fadeOut);
				}
				else if(m.phase == 3){
					m.phase = 0;
					m.cycleTimer.restart(m.stayOff);
				}
			}
			else {
				interpolate(propOut, 0, m.turnOff); #kills any currently ongoing interpolation
				m.phase = 0;
			}
		});
		m.cycleTimer.singleShot = 1;
		if(propSwitch==nil) {
			m.listen = nil;
			return m;
		}
		m.listen = setlistener(propSwitch, func{m.cycleTimer.restart(0);}); #handle switch changes
		m.cycleTimer.restart(0); #start the looping
		return m;
	},
	#destructor
	del: func {
		if(me.listen!=nil) removelistener(me.listen);
		me.cycleTimer.stop();
	},
};

#By default, the switch property is initialized to 1 (only if no value is already assigned). Don't change the class implementation! To override this, set the property manually. You don't need to care if any other code already does it for you. 
navLights = lightCycle.new(navSwitch, lightsPath~"nav-lights-intensity");

### Uncomment and tune those to customize times ###
#navLights.fadeIn = 0.0; #fade in time 
#navLights.fadeOut = 0.0; #fade out time
#navLights.stayOn = 100; #stable on period
#navLights.stayOff = 0.0; #stable off period
#navLights.turnOff = 0.12; #fade out time when turned off

 setlistener(navSwitch, func{navS=getprop(navSwitch);if(navS){setprop(lightsPath~"nav-lights-intensity", 1)}else{setprop(lightsPath~"nav-lights-intensity", 0)}});setprop(lightsPath~"nav-lights-intensity", 1);



### BEACON ###
var beacon = nil;
if(beaconSwitch!=nil) {
	props.globals.initNode(beaconSwitch, 1, "BOOL");
	beacon = aircraft.light.new(lightsPath~"beacon-state", 
		[0.0, 1.0 + rand()*0.05-0.025], beaconSwitch);
}
	
	
### STROBE ###
var strobe = nil;
if(strobeSwitch!=nil) {
	props.globals.initNode(strobeSwitch, 1, "BOOL");
	strobe = aircraft.light.new(lightsPath~"strobe-state", 
		[0.0, 0.87 + rand()*0.05-0.025], strobeSwitch);
}


### LIGHT FADING ###

#class for controlling fade in/out behavior - propIn is a control property (handled as a boolean) and propOut is interpolated
#all light brightness animations in xmls depend on propOut (Rembrandt brightness, material emission, flares transparency, ...)
var lightFadeInOut = {
	#constructor
	new: func(propSwitch, propOut) {
		m = { parents: [lightFadeInOut] };
		m.fadeIn = 0.3; #some sane defaults
		m.fadeOut = 0.4;
		if(propSwitch==nil) {
			m.listen = nil;
			return m;
		}
		props.globals.initNode(propSwitch, 1, "BOOL");
		m.isOn = getprop(propSwitch);
		props.globals.initNode(propOut, m.isOn, "DOUBLE");
		m.listen = setlistener(propSwitch, 
			func {
				if(m.isOn and !getprop(propSwitch)) {
					interpolate(propOut, 0, m.fadeOut);
					m.isOn = 0;
				}
				if(!m.isOn and getprop(propSwitch)) {
					interpolate(propOut, 1, m.fadeIn);
					m.isOn = 1;
				}
			}
		);
		return m;
	},
	#destructor
	del: func {
		if(me.listen!=nil) removelistener(me.listen);
	},
};

fadeLanding = lightFadeInOut.new(landingSwitch, lightsPath~"landing-lights-intensity");
fadeTaxi = lightFadeInOut.new(taxiSwitch, lightsPath~"taxi-light-intensity");
fadeProbe = lightFadeInOut.new(probeSwitch, lightsPath~"probe-light-intensity");
fadeWhite = lightFadeInOut.new(whiteSwitch, lightsPath~"white-light-intensity");
#manipulate times if defaults don't fit your needs:
#fadeLanding.fadeIn = 0.5;
#fadeLanding.fadeOut = 0.8;


### the rest of your model load embedded Nasal code ###



    ]]>
        </load>

        <unload>
		  stopFire();
      disintegrated = 0;
      removelistener(listenCrash);
      
      #prevent multiple timers and listeners from running and fighting on next connect
      #cleanly destroy MP property mirroring
      mirrorTimer.stop();
      mirrorTimer = nil;
      mirrorValues = nil;
      
      #cleanly destroy nav lights
      if(navSwitch!=nil) setprop(navSwitch, 0);
      navLights.del();
      if(navSwitch!=nil) navLights.cycleTimer = nil;
      navLights = nil;
      
      #cleanly destroy beacon
      if(beaconSwitch!=nil) setprop(beaconSwitch, 0);
      beacon.del();
      beacon = nil;
      
      #cleanly destroy strobe
      if(strobeSwitch!=nil) setprop(strobeSwitch, 0);
      strobe.del();
      strobe = nil;
      
      #cleanly destroy light fade in/out animation objects
      fadeLanding.del();
      fadeTaxi.del();
      fadeProbe.del();
      fadeWhite.del();
      
      ### the rest of your model unload embedded Nasal code ###
           
            livery_update.stop();
              ramp_door.unalias();
	    crew_door.unalias();
		wings_door.unalias();
      passenger_door.unalias();
       removelistener(listenMpDecode);
        </unload>
    </nasal>

  <!-- All objects -->
  
  <!-- Empty objects -->
  <!-- objects -->  
  <animation>		
    <object-name>FuselageM</object-name>
	<object-name>FuselageUP</object-name>
	<object-name>Eng1</object-name>
	<object-name>Eng2</object-name>
	<object-name>Eng3</object-name>
	<object-name>Circle.012</object-name>
	<object-name>Circle.016</object-name>
	<object-name>Circle.015</object-name>
	<object-name>Circle.017</object-name>
	<object-name>BlastWarn</object-name>
	<object-name>Eng1sup</object-name>
	<object-name>Eng2sup</object-name>
	<object-name>Circle.056</object-name>
	<object-name>Circle.006</object-name>
	<object-name>Circle.077</object-name>
	<object-name>Circle.003</object-name>
	<object-name>Cube.022</object-name>
	<object-name>Cube.021</object-name>
	<object-name>Cube.016</object-name>
	<object-name>Cube.020</object-name>
	<object-name>RefuelBoom</object-name>
	<object-name>Plane.008</object-name>
	<object-name>Cylinder.026</object-name>
	<object-name>Cylinder</object-name>
	<object-name>Plane.023</object-name>
	<object-name>Circle.060</object-name>
	<object-name>Circle.011</object-name>
	<object-name>Plane.020</object-name>
	<object-name>Plane</object-name>
	<object-name>FuselageM.001</object-name>
	<object-name>Cube.009</object-name>
	<object-name>NgearComp</object-name>
	<object-name>NGD1</object-name>
	<object-name>NGD2</object-name>
	<object-name>OleoCylNG</object-name>
	<object-name>NGDbrace</object-name>
	<object-name>OleoPNG</object-name>
	<object-name>NW</object-name>
	<object-name>RLOleoCyl</object-name>
	<object-name>RLOleoP</object-name>
	<object-name>Ltorque1</object-name>
	<object-name>Ltorque2</object-name>
	<object-name>LRDbrace</object-name>
	<object-name>LW</object-name>
	<object-name>RROleoCyl</object-name>
	<object-name>RROleoP</object-name>
	<object-name>Rtorque1</object-name>
	<object-name>Rtorque2</object-name>
	<object-name>RRDbrace</object-name>
	<object-name>RW</object-name>
	<object-name>LtankSup</object-name>
	<object-name>RtankSup</object-name>
	<object-name>Ltank</object-name>
	<object-name>Rtank</object-name>
	<object-name>Cube.006</object-name>
	<object-name>Cube</object-name>
	<object-name>Cube.008</object-name>
	<object-name>Cylinder.012</object-name>
	<object-name>Cylinder.015</object-name>
	<object-name>Cylinder.013</object-name>
	<object-name>Cylinder.014</object-name>
	<object-name>Cylinder.031</object-name>
	<object-name>Cylinder.003</object-name>
	<object-name>Cylinder.001</object-name>
	<object-name>Plane.025</object-name>
	<object-name>Plane.002</object-name>
	<object-name>Circle.033</object-name>
	<object-name>Circle.002</object-name>
	<object-name>Circle.036</object-name>
	<object-name>Circle.022</object-name>
	<object-name>Plane.004</object-name>
	<object-name>TailBoom</object-name>
	<object-name>RearD</object-name>
	<object-name>TBrotAxis</object-name>
	<object-name>TBsupUP</object-name>
	<object-name>TBsup</object-name>
	<object-name>TBsupL</object-name>
	<object-name>InterGbox</object-name>
	<object-name>TailPsup</object-name>
	<object-name>TailP</object-name>
	<object-name>TailBumper</object-name>
	<object-name>TailGrids</object-name>
	<object-name>Circle.021</object-name>
	<object-name>TailRotBase</object-name>
	<object-name>TailRotorBlades</object-name>
	<object-name>TLB</object-name>
	<object-name>MLB</object-name>
	<object-name>CrewDoorL</object-name>
	<object-name>CrewDoorUP</object-name>
	<object-name>Plane.026</object-name>
	<object-name>CDoorSP</object-name>
	<object-name>LSwindow</object-name>
	<object-name>Plane.024</object-name>
	<object-name>Plane.007</object-name>
	<object-name>Plane.063</object-name>
	<object-name>Plane.076</object-name>
	<object-name>Plane.069</object-name>
	<object-name>BayDoorL</object-name>
	<object-name>BayDoorUP</object-name>
	<object-name>SP</object-name>
	<object-name>Hub-Top</object-name>
	<object-name>Hub-C</object-name>
	<object-name>Hub-base</object-name>
	<object-name>Hub-base.001</object-name>
	<object-name>Hub-base.005</object-name>
	<object-name>BS1</object-name>
	<object-name>BS2</object-name>
	<object-name>BS3</object-name>
	<object-name>BS4</object-name>
	<object-name>BS5</object-name>
	<object-name>BS6</object-name>
	<object-name>BS7</object-name>
	<object-name>BS1.001</object-name>
	<object-name>BS2.001</object-name>
	<object-name>BS3.001</object-name>
	<object-name>BS4.001</object-name>
	<object-name>BS5.001</object-name>
	<object-name>BS6.001</object-name>
	<object-name>BS7.001</object-name>
	<object-name>PfixM1</object-name>
	<object-name>PfixM2</object-name>
	<object-name>PfixM3</object-name>
	<object-name>PfixM4</object-name>
	<object-name>PfixM5</object-name>
	<object-name>PfixM6</object-name>
	<object-name>PfixM7</object-name>
	<object-name>PaleFix1</object-name>
	<object-name>PaleFix2</object-name>
	<object-name>PaleFix3</object-name>
	<object-name>PaleFix4</object-name>
	<object-name>PaleFix5</object-name>
	<object-name>PaleFix6</object-name>
	<object-name>PaleFix7</object-name>
  </animation>

  <!-- Transparent Objects -->
  <effect>
        <inherits-from>Effects/model-transparent</inherits-from>
        <object-name>GL</object-name>
        <object-name>GLup</object-name>
        <object-name>LSwindowGL</object-name>
        <object-name>CrewDoorGL</object-name>
        <object-name>BayDoorGL</object-name>
        <object-name>Plane.005</object-name>
        <object-name>Plane.006</object-name>
        <object-name>Circle.023</object-name>
        <object-name>Circle.024</object-name>
        <object-name>MLBglass</object-name>
        <object-name>LBglass</object-name>
        <object-name>RBglass</object-name>
        <object-name>TLB.002</object-name>
        <object-name>Circle.018</object-name>
        <object-name>Circle.020</object-name>
        <object-name>Circle.028</object-name>
        <object-name>Circle</object-name>
        <object-name>MainRotProp</object-name>
        <object-name>TailRotProp</object-name>
    </effect>
	
	<animation>
    <type>shader</type>
    <shader>chrome</shader>
    <texture>Aircraft/Generic/Effects/glass_shader.png</texture>
     <object-name>GL</object-name>
        <object-name>GLup</object-name>
        <object-name>LSwindowGL</object-name>
        <object-name>CrewDoorGL</object-name>
        <object-name>BayDoorGL</object-name>
		 <object-name>MLBglass</object-name>
        <object-name>LBglass</object-name>
        <object-name>RBglass</object-name>

  </animation>
	
	
	

    <animation>
    <type>material</type>
    <object-name>FuselageM</object-name>
	<object-name>FuselageUP</object-name>
	<object-name>Eng1</object-name>
	<object-name>Eng2</object-name>
	<object-name>Eng3</object-name>
	<object-name>Circle.012</object-name>
	<object-name>Circle.016</object-name>
	<object-name>Circle.015</object-name>
	<object-name>Circle.017</object-name>
	<object-name>BlastWarn</object-name>
	<object-name>Eng1sup</object-name>
	<object-name>Eng2sup</object-name>
	<object-name>Circle.056</object-name>
	<object-name>Circle.006</object-name>
	<object-name>Circle.077</object-name>
	<object-name>Circle.003</object-name>
	<object-name>Cube.022</object-name>
	<object-name>Cube.021</object-name>
	<object-name>Cube.016</object-name>
	<object-name>Cube.020</object-name>
	<object-name>RefuelBoom</object-name>
	<object-name>Plane.008</object-name>
	<object-name>Cylinder.026</object-name>
	<object-name>Cylinder</object-name>
	<object-name>Plane.023</object-name>
	<object-name>Circle.060</object-name>
	<object-name>Circle.011</object-name>
	<object-name>Plane.020</object-name>
	<object-name>Plane</object-name>
	<object-name>FuselageM.001</object-name>
	<object-name>Cube.009</object-name>
	<object-name>NgearComp</object-name>
	<object-name>NGD1</object-name>
	<object-name>NGD2</object-name>
	<object-name>OleoCylNG</object-name>
	<object-name>NGDbrace</object-name>
	<object-name>OleoPNG</object-name>
	<object-name>NW</object-name>
	<object-name>RLOleoCyl</object-name>
	<object-name>RLOleoP</object-name>
	<object-name>Ltorque1</object-name>
	<object-name>Ltorque2</object-name>
	<object-name>LRDbrace</object-name>
	<object-name>LW</object-name>
	<object-name>RROleoCyl</object-name>
	<object-name>RROleoP</object-name>
	<object-name>Rtorque1</object-name>
	<object-name>Rtorque2</object-name>
	<object-name>RRDbrace</object-name>
	<object-name>RW</object-name>
	<object-name>LtankSup</object-name>
	<object-name>RtankSup</object-name>
	<object-name>Ltank</object-name>
	<object-name>Rtank</object-name>
	<object-name>Cube.006</object-name>
	<object-name>Cube</object-name>
	<object-name>Cube.008</object-name>
	<object-name>Cylinder.012</object-name>
	<object-name>Cylinder.015</object-name>
	<object-name>Cylinder.013</object-name>
	<object-name>Cylinder.014</object-name>
	<object-name>Cylinder.031</object-name>
	<object-name>Cylinder.003</object-name>
	<object-name>Cylinder.001</object-name>
	<object-name>Plane.025</object-name>
	<object-name>Plane.002</object-name>
	<object-name>Circle.033</object-name>
	<object-name>Circle.002</object-name>
	<object-name>Circle.036</object-name>
	<object-name>Circle.022</object-name>
	<object-name>Plane.004</object-name>
	<object-name>TailBoom</object-name>
	<object-name>RearD</object-name>
	<object-name>TBrotAxis</object-name>
	<object-name>TBsupUP</object-name>
	<object-name>TBsup</object-name>
	<object-name>TBsupL</object-name>
	<object-name>InterGbox</object-name>
	<object-name>TailPsup</object-name>
	<object-name>TailP</object-name>
	<object-name>TailBumper</object-name>
	<object-name>Circle.021</object-name>
	<object-name>TailRotBase</object-name>
	<object-name>TailRotorBlades</object-name>
	<object-name>TLB</object-name>
	<object-name>MLB</object-name>
	<object-name>CrewDoorL</object-name>
	<object-name>CrewDoorUP</object-name>
	<object-name>Plane.026</object-name>
	<object-name>CDoorSP</object-name>
	<object-name>LSwindow</object-name>
	<object-name>Plane.024</object-name>
	<object-name>Plane.007</object-name>
	<object-name>Plane.063</object-name>
	<object-name>Plane.076</object-name>
	<object-name>Plane.069</object-name>
	<object-name>BayDoorL</object-name>
	<object-name>BayDoorUP</object-name>
	<object-name>SP</object-name>
	<object-name>Hub-Top</object-name>
	<object-name>Hub-C</object-name>
	<object-name>Hub-base</object-name>
	<object-name>Hub-base.001</object-name>
	<object-name>Hub-base.005</object-name>
	<object-name>BS1</object-name>
	<object-name>BS2</object-name>
	<object-name>BS3</object-name>
	<object-name>BS4</object-name>
	<object-name>BS5</object-name>
	<object-name>BS6</object-name>
	<object-name>BS7</object-name>
	<object-name>BS1.001</object-name>
	<object-name>BS2.001</object-name>
	<object-name>BS3.001</object-name>
	<object-name>BS4.001</object-name>
	<object-name>BS5.001</object-name>
	<object-name>BS6.001</object-name>
	<object-name>BS7.001</object-name>
	<object-name>PfixM1</object-name>
	<object-name>PfixM2</object-name>
	<object-name>PfixM3</object-name>
	<object-name>PfixM4</object-name>
	<object-name>PfixM5</object-name>
	<object-name>PfixM6</object-name>
	<object-name>PfixM7</object-name>
	<object-name>PaleFix1</object-name>
	<object-name>PaleFix2</object-name>
	<object-name>PaleFix3</object-name>
	<object-name>PaleFix4</object-name>
	<object-name>PaleFix5</object-name>
	<object-name>PaleFix6</object-name>
	<object-name>PaleFix7</object-name>
    
    <property-base>sim/model/livery</property-base>
    <texture-prop>texture</texture-prop>
    <texture>TextureMain.png</texture>

  </animation>

  <!-- Interior -->
  <model>
    <path>Aircraft/ch53e/Models/Interior/interior.xml</path>
    <offsets>
      <x-m> 0 </x-m>
      <y-m> 0 </y-m>
      <z-m> 0 </z-m>
    </offsets>
  </model>
  
  <!-- Some special-Anims from original CH53E by Josh Babcock -->
  <body-animation include="ch53e-caution-anim.xml" omit-node="y"/>
  <body-animation include="ch53e-center-stand-hotspots.xml" omit-node="y"/>
  <body-animation include="ch53e-cockpit-anim.xml" omit-node="y"/>
  <body-animation include="ch53e-controls.xml" omit-node="y"/>
  <body-animation include="ch53e-panel-hotspots.xml" omit-node="y"/>
  <body-animation include="ch53e-stick-pos-anim.xml" omit-node="y"/>
  <body-animation include="hotspots-template.xml" omit-node="y"/>

 

  <!-- MainRotor  -->
  <animation>
    <name>MovMainRotor</name>
    <object-name>Hub-Top</object-name>
	<object-name>Hub-C</object-name>
	<object-name>Hub-base</object-name>
	<object-name>Hub-base.001</object-name>
	<object-name>Hub-base.005</object-name>
	<object-name>BS1.001</object-name>
	<object-name>BS2.001</object-name>
	<object-name>BS3.001</object-name>
	<object-name>BS4.001</object-name>
	<object-name>BS5.001</object-name>
	<object-name>BS6.001</object-name>
	<object-name>BS7.001</object-name>
	<object-name>PfixM1</object-name>
	<object-name>PfixM2</object-name>
	<object-name>PfixM3</object-name>
	<object-name>PfixM4</object-name>
	<object-name>PfixM5</object-name>
	<object-name>PfixM6</object-name>
	<object-name>PfixM7</object-name>
	<object-name>PaleFix1</object-name>
	<object-name>PaleFix2</object-name>
	<object-name>PaleFix3</object-name>
	<object-name>PaleFix4</object-name>
	<object-name>PaleFix5</object-name>
	<object-name>PaleFix6</object-name>
	<object-name>PaleFix7</object-name>
	
	<object-name>MainRotProp</object-name>
  </animation>
  
  <animation>
    <type>rotate</type>
      <object-name>MovMainRotor</object-name>
      <object-name>BS1</object-name>
      <object-name>BS2</object-name>
      <object-name>BS3</object-name>
      <object-name>BS4</object-name>
      <object-name>BS5</object-name>
      <object-name>BS6</object-name>
      <object-name>BS7</object-name>
      <expression>
          <product>
              <property>rotors/main/blade[0]/position-deg</property>
              <table>
                  <property>surface-positions/wing-fold-pos-norm</property>
                  <entry>
                          <ind> 0.0</ind>
                          <dep> 1.0</dep>
                      </entry>
                      <entry>
                          <ind> 0.01</ind>
                          <dep> 0.0</dep>
                      </entry>
              </table>
              <!--<dif>
                  <value>1</value>
                  <property>surface-positions/wing-fold-pos-norm</property>
              </dif>-->
          </product>
      </expression>
      <axis>
          <x1-m>  0.055 </x1-m>
      <y1-m>  0.000 </y1-m>
      <z1-m>  3.806 </z1-m>
      <x2-m>  0.100 </x2-m>
      <y2-m>  0.000 </y2-m>
      <z2-m>  3.293 </z2-m>
    </axis>
  </animation>
  
  <animation>
        <type>select</type>
        <object-name>MainRotProp</object-name>
        <condition>
            <greater-than>
			<property>rotors/main/rpm</property>
                <value>150</value>
            </greater-than>
        </condition>
    </animation>
	
  <animation>
        <type>select</type>
		<object-name>BS1</object-name>
		<object-name>BS2</object-name>
		<object-name>BS3</object-name>
		<object-name>BS4</object-name>
		<object-name>BS5</object-name>
		<object-name>BS6</object-name>
		<object-name>BS7</object-name>
        <condition>
            <less-than>
			<property>rotors/main/rpm</property>
                <value>151</value>
            </less-than>
        </condition>
    </animation>
  
  <!-- TailRotor  -->
  
  <animation>
    <type>rotate</type>
    <object-name>TailRotorBlades</object-name>
    <object-name>TailRotBase</object-name>
    <object-name>TailRotProp</object-name>
      <expression>
          <product>
              <property>rotors/tail/blade[0]/position-deg</property>
              <table>
                  <property>surface-positions/wing-fold-pos-norm</property>
                  <entry>
                      <ind> 0.0</ind>
                      <dep> 1.0</dep>
                  </entry>
                  <entry>
                      <ind> 0.01</ind>
                      <dep> 0.0</dep>
                  </entry>
              </table>
              <!--<dif>
                  <value>1</value>
                  <property>surface-positions/wing-fold-pos-norm</property>
              </dif>-->
          </product>
      </expression>
    <axis>
      <x1-m>  14.031 </x1-m>
      <y1-m>  -2.041 </y1-m>
      <z1-m>  3.757 </z1-m>
      <x2-m>  14.031 </x2-m>
      <y2-m>  -1.566 </y2-m>
      <z2-m>  3.930 </z2-m>
    </axis>
  </animation>  

    <animation>
        <type>select</type>
        <object-name>TailRotorBlades</object-name>
        <condition>
            <less-than>
                <property>rotors/tail/rpm</property>
                <value>500</value>
            </less-than>
        </condition>
    </animation>
	
	<animation>
        <type>select</type>
        <object-name>TailRotProp</object-name>
        <condition>
            <greater-than>
                <property>rotors/tail/rpm</property>
                <value>499.999</value>
            </greater-than>
        </condition>
    </animation>
	

	<!-- Fold testing  -->
	<!-- B5 -->
	<animation>
    <name>B5Local</name>
    <object-name>PfixM5</object-name>
	<object-name>BS5.001</object-name>
  </animation>
  

  
	<animation>
		<type>rotate</type>
                <object-name>B5Local</object-name>
         <property>surface-positions/wing-fold-pos-norm</property>
		<factor>-25</factor>
		<axis>
        <x1-m>  -0.929 </x1-m>
        <y1-m>  -0.486 </y1-m>
        <z1-m>  3.465 </z1-m>
        <x2-m>  -1.054 </x2-m>
        <y2-m>  -0.548 </y2-m>
        <z2-m>  3.454 </z2-m>
        </axis>
	</animation>
	
	<animation>
		<type>rotate</type>
                <object-name>BS5</object-name>
         <property>surface-positions/wing-fold-pos-norm</property>
		<factor>-25</factor>
		<axis>
        <x1-m>  -0.929 </x1-m>
        <y1-m>  -0.486 </y1-m>
        <z1-m>  3.465 </z1-m>
        <x2-m>  -1.054 </x2-m>
        <y2-m>  -0.548 </y2-m>
        <z2-m>  3.454 </z2-m>
        </axis>
	</animation>

		
	<animation>
		<type>rotate</type>
                <object-name>BS5.001</object-name>
         <property>surface-positions/wing-fold-pos-norm</property>
		<factor>-130.8</factor>
		<axis>
        <x1-m>  -1.175 </x1-m>
        <y1-m>  -0.752 </y1-m>
        <z1-m>  3.584 </z1-m>
        <x2-m>  -1.150 </x2-m>
        <y2-m>  -0.752 </y2-m>
        <z2-m>  3.303 </z2-m>
        </axis>
	</animation>
	
	<animation>
		<type>rotate</type>
                <object-name>BS5</object-name>
         <property>surface-positions/wing-fold-pos-norm</property>
		<factor>-130.8</factor>
		<axis>
        <x1-m>  -1.175 </x1-m>
        <y1-m>  -0.752 </y1-m>
        <z1-m>  3.584 </z1-m>
        <x2-m>  -1.150 </x2-m>
        <y2-m>  -0.752 </y2-m>
        <z2-m>  3.303 </z2-m>
        </axis>
	</animation>
	
	<!-- B6 -->
	<animation>
    <name>B6Local</name>
    <object-name>PfixM6</object-name>
	<object-name>BS6.001</object-name>
  </animation>
  

  
	<animation>
		<type>rotate</type>
                <object-name>B6Local</object-name>
         <property>surface-positions/wing-fold-pos-norm</property>
		<factor>-04</factor>
		<axis>
        <x1-m>  -0.171 </x1-m>
        <y1-m>  -1.092 </y1-m>
        <z1-m>  3.531 </z1-m>
        <x2-m>  -0.201 </x2-m>
        <y2-m>  -1.229 </y2-m>
        <z2-m>  3.528 </z2-m>
        </axis>
	</animation>
	
	<animation>
		<type>rotate</type>
                <object-name>BS6</object-name>
         <property>surface-positions/wing-fold-pos-norm</property>
		<factor>-04</factor>
		<axis>
        <x1-m>  -0.171 </x1-m>
        <y1-m>  -1.092 </y1-m>
        <z1-m>  3.531 </z1-m>
        <x2-m>  -0.201 </x2-m>
        <y2-m>  -1.229 </y2-m>
        <z2-m>  3.528 </z2-m>
        </axis>
	</animation>

		
	<animation>
		<type>rotate</type>
                <object-name>BS6.001</object-name>
         <property>surface-positions/wing-fold-pos-norm</property>
		<factor>-93</factor>
		<axis>
        <x1-m>  -0.122 </x1-m>
        <y1-m>  -1.441 </y1-m>
        <z1-m>  3.676 </z1-m>
        <x2-m>  -0.098 </x2-m>
        <y2-m>  -1.441 </y2-m>
        <z2-m>  3.395 </z2-m>
        </axis>
	</animation>
	
	<animation>
		<type>rotate</type>
                <object-name>BS6</object-name>
         <property>surface-positions/wing-fold-pos-norm</property>
		<factor>-93</factor>
		<axis>
        <x1-m>  -0.122 </x1-m>
        <y1-m>  -1.441 </y1-m>
        <z1-m>  3.676 </z1-m>
        <x2-m>  -0.098 </x2-m>
        <y2-m>  -1.441 </y2-m>
        <z2-m>  3.395 </z2-m>
        </axis>
	</animation>
	
	<!-- B7 -->
	<animation>
    <name>B7Local</name>
    <object-name>PfixM7</object-name>
	<object-name>BS7.001</object-name>
  </animation>
  

  
	<animation>
		<type>rotate</type>
                <object-name>B7Local</object-name>
         <property>surface-positions/wing-fold-pos-norm</property>
		<factor>-02</factor>
		<axis>
        <x1-m>  0.773 </x1-m>
        <y1-m>  -0.876 </y1-m>
        <z1-m>  3.614 </z1-m>
        <x2-m>  0.861 </x2-m>
        <y2-m>  -0.984 </y2-m>
        <z2-m>  3.621 </z2-m>
        </axis>
	</animation>
	
	<animation>
		<type>rotate</type>
                <object-name>BS7</object-name>
         <property>surface-positions/wing-fold-pos-norm</property>
		<factor>-02</factor>
		<axis>
        <x1-m>  0.773 </x1-m>
        <y1-m>  -0.876 </y1-m>
        <z1-m>  3.614 </z1-m>
        <x2-m>  0.861 </x2-m>
        <y2-m>  -0.984 </y2-m>
        <z2-m>  3.621 </z2-m>
        </axis>
	</animation>

		
	<animation>
		<type>rotate</type>
                <object-name>BS7.001</object-name>
         <property>surface-positions/wing-fold-pos-norm</property>
		<factor>-48.6</factor>
		<axis>
        <x1-m>  1.071 </x1-m>
        <y1-m>  -1.045 </y1-m>
        <z1-m>  3.781 </z1-m>
        <x2-m>  1.095 </x2-m>
        <y2-m>  -1.045 </y2-m>
        <z2-m>  3.499 </z2-m>
        </axis>
	</animation>
	
	<animation>
		<type>rotate</type>
                <object-name>BS7</object-name>
         <property>surface-positions/wing-fold-pos-norm</property>
		<factor>-48.6</factor>
		<axis>
        <x1-m>  1.071 </x1-m>
        <y1-m>  -1.045 </y1-m>
        <z1-m>  3.781 </z1-m>
        <x2-m>  1.095 </x2-m>
        <y2-m>  -1.045 </y2-m>
        <z2-m>  3.499 </z2-m>
        </axis>
	</animation>
	
	
	<!-- B2 -->
	<animation>
    <name>B2Local</name>
    <object-name>PfixM2</object-name>
	<object-name>BS2.001</object-name>
  </animation>
  

  
	<animation>
		<type>rotate</type>
                <object-name>B2Local</object-name>
         <property>surface-positions/wing-fold-pos-norm</property>
		<factor>02</factor>
		<axis>
        <x1-m>  0.773 </x1-m>
        <y1-m>  0.876 </y1-m>
        <z1-m>  3.614 </z1-m>
        <x2-m>  0.858 </x2-m>
        <y2-m>  0.986 </y2-m>
        <z2-m>  3.621 </z2-m>
        </axis>
	</animation>
	
	<animation>
		<type>rotate</type>
                <object-name>BS2</object-name>
         <property>surface-positions/wing-fold-pos-norm</property>
		<factor>02</factor>
		<axis>
        <x1-m>  0.773 </x1-m>
        <y1-m>  0.876 </y1-m>
        <z1-m>  3.614 </z1-m>
        <x2-m>  0.858 </x2-m>
        <y2-m>  0.986 </y2-m>
        <z2-m>  3.621 </z2-m>
        </axis>
	</animation>

		
	<animation>
		<type>rotate</type>
                <object-name>BS2.001</object-name>
         <property>surface-positions/wing-fold-pos-norm</property>
		<factor>48.6</factor>
		<axis>
        <x1-m>  1.068 </x1-m>
        <y1-m>  1.047 </y1-m>
        <z1-m>  3.781 </z1-m>
        <x2-m>  1.093 </x2-m>
        <y2-m>  1.047 </y2-m>
        <z2-m>  3.499 </z2-m>
        </axis>
	</animation>
	
	<animation>
		<type>rotate</type>
                <object-name>BS2</object-name>
         <property>surface-positions/wing-fold-pos-norm</property>
		<factor>48.6</factor>
		<axis>
        <x1-m>  1.068 </x1-m>
        <y1-m>  1.047 </y1-m>
        <z1-m>  3.781 </z1-m>
        <x2-m>  1.093 </x2-m>
        <y2-m>  1.047 </y2-m>
        <z2-m>  3.499 </z2-m>
        </axis>
	</animation>
	
	
	<!-- B3 -->
	<animation>
    <name>B3Local</name>
    <object-name>PfixM3</object-name>
	<object-name>BS3.001</object-name>
  </animation>
  

  
	<animation>
		<type>rotate</type>
                <object-name>B3Local</object-name>
         <property>surface-positions/wing-fold-pos-norm</property>
		<factor>04</factor>
		<axis>
        <x1-m>  -0.172 </x1-m>
        <y1-m>  1.092 </y1-m>
        <z1-m>  3.531 </z1-m>
        <x2-m>  -0.204 </x2-m>
        <y2-m>  1.228 </y2-m>
        <z2-m>  3.528 </z2-m>
        </axis>
	</animation>
	
	<animation>
		<type>rotate</type>
                <object-name>BS3</object-name>
         <property>surface-positions/wing-fold-pos-norm</property>
		<factor>04</factor>
		<axis>
        <x1-m>  -0.172 </x1-m>
        <y1-m>  1.092 </y1-m>
        <z1-m>  3.531 </z1-m>
        <x2-m>  -0.204 </x2-m>
        <y2-m>  1.228 </y2-m>
        <z2-m>  3.528 </z2-m>
        </axis>
	</animation>

		
	<animation>
		<type>rotate</type>
                <object-name>BS3.001</object-name>
         <property>surface-positions/wing-fold-pos-norm</property>
		<factor>93</factor>
		<axis>
        <x1-m>  -0.125 </x1-m>
        <y1-m>  1.440 </y1-m>
        <z1-m>  3.676 </z1-m>
        <x2-m>  -0.101 </x2-m>
        <y2-m>  1.440 </y2-m>
        <z2-m>  3.395 </z2-m>
        </axis>
	</animation>
	
	<animation>
		<type>rotate</type>
                <object-name>BS3</object-name>
         <property>surface-positions/wing-fold-pos-norm</property>
		<factor>93</factor>
		<axis>
        <x1-m>  -0.125 </x1-m>
        <y1-m>  1.440 </y1-m>
        <z1-m>  3.676 </z1-m>
        <x2-m>  -0.101 </x2-m>
        <y2-m>  1.440 </y2-m>
        <z2-m>  3.395 </z2-m>
        </axis>
	</animation>
	
	
	<!-- B4 -->
	<animation>
    <name>B4Local</name>
    <object-name>PfixM4</object-name>
	<object-name>BS4.001</object-name>
  </animation>
  

  
	<animation>
		<type>rotate</type>
                <object-name>B4Local</object-name>
         <property>surface-positions/wing-fold-pos-norm</property>
		<factor>25</factor>
		<axis>
        <x1-m>  -0.929 </x1-m>
        <y1-m>  0.486 </y1-m>
        <z1-m>  3.465 </z1-m>
        <x2-m>  -1.055 </x2-m>
        <y2-m>  0.545 </y2-m>
        <z2-m>  3.454 </z2-m>
        </axis>
	</animation>
	
	<animation>
		<type>rotate</type>
                <object-name>BS4</object-name>
         <property>surface-positions/wing-fold-pos-norm</property>
		<factor>25</factor>
		<axis>
        <x1-m>  -0.929 </x1-m>
        <y1-m>  0.486 </y1-m>
        <z1-m>  3.465 </z1-m>
        <x2-m>  -1.055 </x2-m>
        <y2-m>  0.545 </y2-m>
        <z2-m>  3.454 </z2-m>
        </axis>
	</animation>

		
	<animation>
		<type>rotate</type>
                <object-name>BS4.001</object-name>
         <property>surface-positions/wing-fold-pos-norm</property>
		<factor>130.8</factor>
		<axis>
        <x1-m>  -1.176 </x1-m>
        <y1-m>  0.749 </y1-m>
        <z1-m>  3.584 </z1-m>
        <x2-m>  -1.151 </x2-m>
        <y2-m>  0.749 </y2-m>
        <z2-m>  3.303 </z2-m>
        </axis>
	</animation>
	
	<animation>
		<type>rotate</type>
                <object-name>BS4</object-name>
         <property>surface-positions/wing-fold-pos-norm</property>
		<factor>130.8</factor>
		<axis>
        <x1-m>  -1.176 </x1-m>
        <y1-m>  0.749 </y1-m>
        <z1-m>  3.584 </z1-m>
        <x2-m>  -1.151 </x2-m>
        <y2-m>  0.749 </y2-m>
        <z2-m>  3.303 </z2-m>
        </axis>
	</animation>

  
  <!-- TailStowing  -->
  <animation>
    <name>TailStow</name>
	<object-name>TailBoom</object-name>
	<object-name>TailBumper</object-name>
	<object-name>InterGbox</object-name>
	<object-name>TailPsup</object-name>
	<object-name>TailP</object-name>
	<object-name>TLB</object-name>
	<object-name>TLB.002</object-name>
	<object-name>Circle.021</object-name>
  </animation>
  

  
  <animation>
    <name>TBsupALL</name>
	<object-name>TBsupUP</object-name>
	<object-name>TBsup</object-name>
	<object-name>TBsupL</object-name>	
  </animation>
	
	<animation>
		<type>rotate</type>
                <object-name>TailStow</object-name>
         <property>surface-positions/wing-fold-pos-norm</property>
		 <interpolation>
		 <entry><ind>0.6</ind><dep>0.0</dep></entry>
		 <entry><ind>1.0</ind><dep>-171.1</dep></entry>
	</interpolation>
		<axis>
        <x1-m>  10.877 </x1-m>
        <y1-m>  0.635 </y1-m>
        <z1-m>  1.853 </z1-m>
        <x2-m>  11.043 </x2-m>
        <y2-m>  0.635 </y2-m>
        <z2-m>  1.126 </z2-m>
        </axis>
	</animation>
	
	<animation>
		<type>rotate</type>
                <object-name>TailGrids</object-name>
         <property>surface-positions/wing-fold-pos-norm</property>
		 <interpolation>
		 <entry><ind>0.6</ind><dep>0.0</dep></entry>
		 <entry><ind>1.0</ind><dep>-171.1</dep></entry>
	</interpolation>
		<axis>
        <x1-m>  10.877 </x1-m>
        <y1-m>  0.635 </y1-m>
        <z1-m>  1.853 </z1-m>
        <x2-m>  11.043 </x2-m>
        <y2-m>  0.635 </y2-m>
        <z2-m>  1.126 </z2-m>
        </axis>
	</animation>
	
	<animation>
		<type>rotate</type>
                <object-name>TailRotBase</object-name>
         <property>surface-positions/wing-fold-pos-norm</property>
		 <interpolation>
		 <entry><ind>0.6</ind><dep>0.0</dep></entry>
		 <entry><ind>1.0</ind><dep>-171.1</dep></entry>
	</interpolation>
		<axis>
        <x1-m>  10.877 </x1-m>
        <y1-m>  0.635 </y1-m>
        <z1-m>  1.853 </z1-m>
        <x2-m>  11.043 </x2-m>
        <y2-m>  0.635 </y2-m>
        <z2-m>  1.126 </z2-m>
        </axis>
	</animation>
	
	<animation>
		<type>rotate</type>
                <object-name>TailRotorBlades</object-name>
         <property>surface-positions/wing-fold-pos-norm</property>
		 <interpolation>
		 <entry><ind>0.6</ind><dep>0.0</dep></entry>
		 <entry><ind>1.0</ind><dep>-171.1</dep></entry>
	</interpolation>
		<axis>
        <x1-m>  10.877 </x1-m>
        <y1-m>  0.635 </y1-m>
        <z1-m>  1.853 </z1-m>
        <x2-m>  11.043 </x2-m>
        <y2-m>  0.635 </y2-m>
        <z2-m>  1.126 </z2-m>
        </axis>
	</animation>
	
	<animation>
		<type>rotate</type>
                <object-name>TailRotProp</object-name>
         <property>surface-positions/wing-fold-pos-norm</property>
		 <interpolation>
		 <entry><ind>0.6</ind><dep>0.0</dep></entry>
		 <entry><ind>1.0</ind><dep>-171.1</dep></entry>
	</interpolation>
		<axis>
        <x1-m>  10.877 </x1-m>
        <y1-m>  0.635 </y1-m>
        <z1-m>  1.853 </z1-m>
        <x2-m>  11.043 </x2-m>
        <y2-m>  0.635 </y2-m>
        <z2-m>  1.126 </z2-m>
        </axis>
	</animation>
	
	<animation>
		<type>rotate</type>
                <object-name>TBsupALL</object-name>
         <property>surface-positions/wing-fold-pos-norm</property>
		 <interpolation>
		 <entry><ind>0.6</ind><dep>0.0</dep></entry>
		 <entry><ind>1.0</ind><dep>-86.5</dep></entry>
	</interpolation>
		<axis>
        <x1-m>  10.877 </x1-m>
        <y1-m>  0.635 </y1-m>
        <z1-m>  1.853 </z1-m>
        <x2-m>  11.043 </x2-m>
        <y2-m>  0.635 </y2-m>
        <z2-m>  1.126 </z2-m>
        </axis>
	</animation>
	
	<animation>
		<type>rotate</type>
                <object-name>TBsupUP</object-name>
         <property>surface-positions/wing-fold-pos-norm</property>
		 <interpolation>
		 <entry><ind>0.6</ind><dep>0.0</dep></entry>
		 <entry><ind>1.0</ind><dep>-66.2</dep></entry>
	</interpolation>
		<axis>
        <x1-m>  11.029 </x1-m>
        <y1-m>  0.364 </y1-m>
        <z1-m>  1.406 </z1-m>
        <x2-m>  11.041 </x2-m>
        <y2-m>  0.364 </y2-m>
        <z2-m>  1.355 </z2-m>
        </axis>
	</animation>
	
	<animation>
		<type>rotate</type>
                <object-name>TBsupL</object-name>
         <property>surface-positions/wing-fold-pos-norm</property>
		 <interpolation>
		 <entry><ind>0.6</ind><dep>0.0</dep></entry>
		 <entry><ind>1.0</ind><dep>55.5</dep></entry>
	</interpolation>
		<axis>
        <x1-m>  10.923 </x1-m>
        <y1-m>  0.364 </y1-m>
        <z1-m>  1.381 </z1-m>
        <x2-m>  10.934 </x2-m>
        <y2-m>  0.364 </y2-m>
        <z2-m>  1.331 </z2-m>
        </axis>
	</animation>
	
  <!-- Bay doors  -->
  <!-- Lower door  -->
  <animation>
    <name>BayDoorLow</name>
    <object-name>BayDoorL</object-name>
	<object-name>SP</object-name>
  </animation>
  
  <animation>
    <type>rotate</type>
    <object-name>BayDoorLow</object-name>
    <property>instrumentation/doors/passenger/position-norm</property>
    <interpolation>
		<entry><ind>0.1</ind><dep>0</dep></entry>
		<entry><ind>1.0</ind><dep>30</dep></entry>
    </interpolation>
    <center>
      <x-m> 4.944 </x-m>
      <y-m>  0.000 </y-m>
      <z-m>  -0.637 </z-m>
    </center>
    <axis>
      <x> 0.000 </x>
      <y> 1.000 </y>
      <z> 0.000 </z>
    </axis>
  </animation>
  
  <animation>
    <type>rotate</type>
    <object-name>SP</object-name>
    <property>instrumentation/doors/passenger/position-norm</property>
    <interpolation>
		<entry><ind>0.8</ind><dep>0</dep></entry>
		<entry><ind>1.0</ind><dep>130</dep></entry>
    </interpolation>
    <center>
      <x-m> 6.896 </x-m>
      <y-m>  0.000 </y-m>
      <z-m>  0.204 </z-m>
    </center>
    <axis>
      <x> 0.000 </x>
      <y> 1.000 </y>
      <z> 0.000 </z>
    </axis>
  </animation>
  
  <!-- Upper door  -->
  <animation>
    <name>BayDoorU</name>
    <object-name>BayDoorUP</object-name>
	<object-name>BayDoorGL</object-name>
  </animation>
  
  <animation>
    <type>rotate</type>
    <object-name>BayDoorU</object-name>
    <property>instrumentation/doors/passenger/position-norm</property>
    <interpolation>
		<entry><ind>0.1</ind><dep>0</dep></entry>
		<entry><ind>1.0</ind><dep>22.3</dep></entry>
    </interpolation>
    <center>
      <x-m> 9.236 </x-m>
      <y-m>  0.000 </y-m>
      <z-m>  1.126 </z-m>
    </center>
    <axis>
      <x> 0.000 </x>
      <y> 1.000 </y>
      <z> 0.000 </z>
    </axis>
  </animation>
  
  <!-- Crew door + side windows  -->
  <animation>
    <type>rotate</type>
    <object-name>LSwindow</object-name>
	<object-name>LSwindowGL</object-name>
	<property>instrumentation/doors/crew/position-norm</property>
    <interpolation>
		<entry><ind>0.1</ind><dep>0</dep></entry>
		<entry><ind>1.0</ind><dep>120</dep></entry>
	</interpolation>
    <center>
      <x-m> -3.462 </x-m>
      <y-m> -1.222 </y-m>
      <z-m>  1.219 </z-m>
    </center>
    <axis>
      <x> 1.000 </x>
      <y> 0.000 </y>
      <z> 0.000 </z>
    </axis>
  </animation>
  
  <animation>
    <type>rotate</type>
    <object-name>CrewDoorUP</object-name>
	<object-name>CrewDoorGL</object-name>
	<property>instrumentation/doors/crew/position-norm</property>
    <interpolation>
		<entry><ind>0.1</ind><dep>0</dep></entry>
		<entry><ind>1.0</ind><dep>-120</dep></entry>
	</interpolation>
    <center>
      <x-m> -3.457 </x-m>
      <y-m>  1.237 </y-m>
      <z-m>  1.219 </z-m>
    </center>
    <axis>
      <x> 1.000 </x>
      <y> 0.000 </y>
      <z> 0.000 </z>
    </axis>
  </animation>
  
  <animation>
    <type>rotate</type>
    <object-name>CrewDoorL</object-name>
    <property>instrumentation/doors/crew/position-norm</property>
    <interpolation>
		<entry><ind>0.1</ind><dep>0</dep></entry>
		<entry><ind>1.0</ind><dep>-90</dep></entry>
	</interpolation>
    <center>
      <x-m> -3.913 </x-m>
      <y-m>  1.236 </y-m>
      <z-m>  0.027 </z-m>
    </center>
    <axis>
      <x> 0.000 </x>
      <y> 0.000 </y>
      <z> 1.000 </z>
    </axis>
  </animation>
  
  <!-- Gears  -->
  <!-- Nose Gear -->
  <animation>
    <name>Ngear</name>
    <object-name>NW</object-name>
	<object-name>OleoPNG</object-name>
	<object-name>OleoCylNG</object-name>
	<object-name>NGDbrace</object-name>
  </animation>
  
  <animation>
    <type>rotate</type>
    <object-name>Ngear</object-name>
    <property>gear/gear[0]/position-norm</property>
    <interpolation>
		<entry><ind>0.0</ind><dep>-85</dep></entry>
		<entry><ind>0.2</ind><dep>-85</dep></entry>
		<entry><ind>0.7</ind><dep>0.0</dep></entry>
    </interpolation>
    <center>
      <x-m> -5.799 </x-m>
      <y-m>  0.000 </y-m>
      <z-m> -0.270 </z-m>
    </center>
    <axis>
      <x>  0.0 </x>
      <y>  1.0 </y>
      <z>  0.0 </z>
    </axis>
  </animation>
  
  <!-- Left Gear -->
  <animation>
    <name>Lgear</name>
    <object-name>LW</object-name>
	<object-name>RLOleoP</object-name>
	<object-name>RLOleoCyl</object-name>
	<object-name>LRDbrace</object-name>
	<object-name>Ltorque1</object-name>
	<object-name>Ltorque2</object-name>
  </animation>
  
  <animation>
    <type>rotate</type>
    <object-name>Lgear</object-name>
    <property>gear/gear[1]/position-norm</property>
    <interpolation>
		<entry><ind>0.0</ind><dep>90</dep></entry>
		<entry><ind>0.2</ind><dep>90</dep></entry>
		<entry><ind>0.7</ind><dep>0.0</dep></entry>
    </interpolation>
    <center>
      <x-m> 2.498 </x-m>
      <y-m> -1.982 </y-m>
      <z-m> -0.270 </z-m>
    </center>
    <axis>
      <x>  0.0 </x>
      <y>  1.0 </y>
      <z>  0.0 </z>
    </axis>
  </animation>
  
  <!-- Right Gear -->
  <animation>
    <name>Rgear</name>
    <object-name>RW</object-name>
	<object-name>RROleoP</object-name>
	<object-name>RROleoCyl</object-name>
	<object-name>RRDbrace</object-name>
	<object-name>Rtorque1</object-name>
	<object-name>Rtorque2</object-name>
  </animation>
  
  <animation>
    <type>rotate</type>
    <object-name>Rgear</object-name>
    <property>gear/gear[2]/position-norm</property>
    <interpolation>
		<entry><ind>0.0</ind><dep>90</dep></entry>
		<entry><ind>0.2</ind><dep>90</dep></entry>
		<entry><ind>0.7</ind><dep>0.0</dep></entry>
    </interpolation>
    <center>
      <x-m> 2.498 </x-m>
      <y-m>  1.982 </y-m>
      <z-m> -0.270 </z-m>
    </center>
    <axis>
      <x>  0.0 </x>
      <y>  1.0 </y>
      <z>  0.0 </z>
    </axis>
  </animation>
	
  <!-- NGdoor -->
  <animation>
    <name>NGdoor</name>
    <object-name>NGD1</object-name>
    <object-name>NGD2</object-name>
  </animation>
  
  <animation>
    <type>rotate</type>
    <object-name>NGdoor</object-name>
    <property>gear/gear[0]/position-norm</property>
    <interpolation>
		<entry><ind>0.0</ind><dep>0.00</dep></entry>
		<entry><ind>0.9</ind><dep>184.70</dep></entry>
		<entry><ind>0.7</ind><dep>184.70</dep></entry>
    </interpolation>
    <center>
      <x-m> -6.010 </x-m>
      <y-m>  0.000 </y-m>
      <z-m> -0.502 </z-m>
    </center>
    <axis>
      <x>  0.0 </x>
      <y>  1.0 </y>
      <z>  0.0 </z>
    </axis>
  </animation>
  
  <animation>
    <type>rotate</type>
    <object-name>NGD2</object-name>
    <property>gear/gear[0]/position-norm</property>
    <interpolation>
		<entry><ind>0.0</ind><dep>0.00</dep></entry>
		<entry><ind>0.9</ind><dep>-113.00</dep></entry>
		<entry><ind>0.7</ind><dep>-113.00</dep></entry>
    </interpolation>
    <center>
      <x-m> -5.497 </x-m>
      <y-m>  0.000 </y-m>
      <z-m> -0.665 </z-m>
    </center>
    <axis>
      <x>  0.0 </x>
      <y>  1.0 </y>
      <z>  0.0 </z>
    </axis>
  </animation>
  
  <!-- Gears Spin -->
  <animation>
    <type>spin</type>
    <object-name>NW</object-name>
    <property>gear/gear[0]/rollspeed-ms</property>
    <factor> 20 </factor>
    <center>
      <x-m> -5.797 </x-m>
      <y-m>  0.000 </y-m>
      <z-m> -0.953 </z-m>
    </center>
    <axis>
      <x>  0.000 </x>
      <y> -1.000 </y>
      <z>  0.000 </z>
    </axis>
  </animation>
  
  <animation>
    <type>spin</type>
    <object-name>LW</object-name>
    <property>gear/gear[1]/rollspeed-ms</property>
    <factor> 20 </factor>
    <center>
      <x-m>  2.497 </x-m>
      <y-m> -1.982 </y-m>
      <z-m> -0.953 </z-m>
    </center>
    <axis>
      <x>  0.000 </x>
      <y> -1.000 </y>
      <z>  0.000 </z>
    </axis>
  </animation>
  
  <animation>
    <type>spin</type>
    <object-name>RW</object-name>
    <property>gear/gear[2]/rollspeed-ms</property>
    <factor> 20 </factor>
    <center>
      <x-m>  2.497 </x-m>
      <y-m>  1.982 </y-m>
      <z-m> -0.953 </z-m>
    </center>
    <axis>
      <x>  0.000 </x>
      <y> -1.000 </y>
      <z>  0.000 </z>
    </axis>
  </animation>
  
  <!-- Compression -->
  <!-- Front wheel -->
  <animation>
    <name>FWtranslate</name>
    <object-name>OleoPNG</object-name>
	<object-name>NW</object-name>
  </animation>  
  
  <animation>
    <type>translate</type>
    <object-name>FWtranslate</object-name>
    <property>gear/gear[0]/compression-norm</property>
    <interpolation>
	  <entry><ind> 0.00 </ind><dep> -0.090 </dep></entry>
      <entry><ind> 0.19 </ind><dep>  0.00 </dep></entry>
      <entry><ind> 1.00 </ind><dep>  0.010 </dep></entry>
    </interpolation>
    <axis>
      <x> 0.0 </x>
      <y> 0.0 </y>
      <z> 1.0 </z>
    </axis>
  </animation>
  
  <!-- Left wheel -->
  <animation>
    <name>LWtranslate</name>
    <object-name>RLOleoP</object-name>
	<object-name>LW</object-name>
	<object-name>Ltorque2</object-name>
  </animation>
  
  <animation>
    <type>translate</type>
    <object-name>LWtranslate</object-name>
    <property>gear/gear[1]/compression-norm</property>
    <interpolation>
      <entry><ind> 0.00 </ind><dep> -0.090 </dep></entry>
      <entry><ind> 0.19 </ind><dep>  0.00 </dep></entry>
      <entry><ind> 1.00 </ind><dep>  0.010 </dep></entry>
    </interpolation>
    <axis>
      <x> 0.0 </x>
      <y> 0.0 </y>
      <z> 1.0 </z>
    </axis>
  </animation>
  
  <animation>
    <type>rotate</type>
    <object-name>Ltorque1</object-name>
    <property>gear/gear[1]/compression-norm</property>
    <interpolation>
	  <entry><ind> 0.00 </ind><dep>  11 </dep></entry>
      <entry><ind> 0.19 </ind><dep>   0 </dep></entry>
      <entry><ind> 1.00 </ind><dep> -03 </dep></entry>
    </interpolation>
    <axis>
        <x1-m>  2.593 </x1-m>
        <y1-m> -2.052 </y1-m>
        <z1-m> -0.766 </z1-m>
        <x2-m>  2.582 </x2-m>
        <y2-m> -1.906 </y2-m>
        <z2-m> -0.766 </z2-m>
    </axis>
  </animation>
  
  
  <animation>
    <type>rotate</type>
    <object-name>Ltorque2</object-name>
    <property>gear/gear[1]/compression-norm</property>
    <interpolation>
	  <entry><ind> 0.00 </ind><dep> -19 </dep></entry>
      <entry><ind> 0.19 </ind><dep>   0 </dep></entry>
      <entry><ind> 1.00 </ind><dep>  03 </dep></entry>
    </interpolation>
    <axis>
        <x1-m>  2.565 </x1-m>
        <y1-m> -2.058 </y1-m>
        <z1-m> -0.900 </z1-m>
        <x2-m>  2.574 </x2-m>
        <y2-m> -1.912 </y2-m>
        <z2-m> -0.900 </z2-m>
    </axis>
  </animation>
  
  
  <!-- Right wheel -->
  <animation>
    <name>RWtranslate</name>
    <object-name>RROleoP</object-name>
	<object-name>RW</object-name>
	<object-name>Rtorque2</object-name>
  </animation>
  
  <animation>
    <type>translate</type>
    <object-name>RWtranslate</object-name>
    <property>gear/gear[2]/compression-norm</property>
    <interpolation>
      <entry><ind> 0.00 </ind><dep> -0.090 </dep></entry>
      <entry><ind> 0.19 </ind><dep>  0.00 </dep></entry>
      <entry><ind> 1.00 </ind><dep>  0.010 </dep></entry>
    </interpolation>
    <axis>
      <x> 0.0 </x>
      <y> 0.0 </y>
      <z> 1.0 </z>
    </axis>
  </animation>
  
  <animation>
    <type>rotate</type>
    <object-name>Rtorque1</object-name>
    <property>gear/gear[2]/compression-norm</property>
    <interpolation>
	  <entry><ind> 0.00 </ind><dep> -11 </dep></entry>
      <entry><ind> 0.19 </ind><dep>   0 </dep></entry>
      <entry><ind> 1.00 </ind><dep>  03 </dep></entry>
    </interpolation>
    <axis>
        <x1-m>  2.593 </x1-m>
        <y1-m>  2.052 </y1-m>
        <z1-m> -0.766 </z1-m>
        <x2-m>  2.582 </x2-m>
        <y2-m>  1.906 </y2-m>
        <z2-m> -0.766 </z2-m>
    </axis>
  </animation>
  
  <animation>
    <type>rotate</type>
    <object-name>Rtorque2</object-name>
    <property>gear/gear[2]/compression-norm</property>
    <interpolation>
	  <entry><ind> 0.00 </ind><dep>  19 </dep></entry>
      <entry><ind> 0.19 </ind><dep>   0 </dep></entry>
      <entry><ind> 1.00 </ind><dep> -03 </dep></entry>
    </interpolation>
    <axis>
        <x1-m>  2.565 </x1-m>
        <y1-m>  2.058 </y1-m>
        <z1-m> -0.900 </z1-m>
        <x2-m>  2.574 </x2-m>
        <y2-m>  1.912 </y2-m>
        <z2-m> -0.900 </z2-m>
    </axis>
  </animation>
  
  <!-- Rotation de la roue avant en fonction de la gouverne de direction --> 
  <animation>
    <type>rotate</type>
    <object-name>Ngear</object-name>
	<property>controls/flight/rudder</property>
    <factor> 20 </factor>
    <center>
      <x-m>  -5.799 </x-m>
      <y-m>   0.000 </y-m>
      <z-m>  -0.814 </z-m>
    </center>
    <axis>
      <x> 0 </x>
      <y> 0 </y>
      <z> 1 </z>
    </axis>
  </animation>
  
  
  <!-- pilots -->
  
  <model>
  <name>pilot</name>
    <path>Aircraft/ch53e/Models/Helipilot4/pilot.xml</path>
    <offsets>
      <x-m>  -5.1 </x-m>
      <y-m> 0.55 </y-m>
      <z-m> 1.1 </z-m>
    </offsets>
	<overlay>
		 <animation n="100">
    <type>scale</type>
    <property>constants/zero</property>
    <x-offset>0.8</x-offset>
    <y-offset>0.8</y-offset>
    <z-offset>0.8</z-offset>
   </animation>
  </overlay>
  </model>
  
  
   <model>
  <name>co-pilot</name>
    <path>Aircraft/ch53e/Models/Helipilot4/pilot.xml</path>
    <offsets>
      <x-m>  -5.1 </x-m>
      <y-m> -0.58 </y-m>
      <z-m> 1.1 </z-m>
    </offsets>
	<overlay>
		 <animation n="100">
    <type>scale</type>
    <property>constants/zero</property>
    <x-offset>0.8</x-offset>
    <y-offset>0.8</y-offset>
    <z-offset>0.8</z-offset>
   </animation>
  </overlay>
  </model>
  
  <!-- Suppress parts in Cockpit View -->

 <animation>
        <type>select</type>
        <object-name>pilot</object-name>
  
		<condition>
<not>
            <property>sim/current-view/internal</property>
</not>
        </condition>
    </animation>		
	
	
 <!--== particles ==-->

	<animation>
		<type>rotate</type>
		<object-name>dirt</object-name>
		<property>orientation/pitch-deg</property>
		<axis>
			<x>0</x>
			<y>-1</y>
			<z>0</z>
		</axis>
	</animation>

	<animation>
		<type>rotate</type>
		<object-name>dirt</object-name>
		<property>orientation/roll-deg</property>
		<axis>
			<x>1</x>
			<y>0</y>
			<z>0</z>
		</axis>
	</animation>

	<animation>
		<type>translate</type>
		<object-name>dirt</object-name>
		<property>position/gear-agl-m</property>
		<axis>
			<x>0</x>
			<y>0</y>
			<z>-1</z>
		</axis>
	</animation>

	<particlesystem>
		<name>dirt</name>
		<texture>dirt.rgb</texture>
		<emissive>false</emissive>
		<lighting>false</lighting>

		<offsets>
			<x-m>0</x-m>
			<y-m>0</y-m>
			<z-m>-1.4</z-m>
			<roll-deg>90</roll-deg>
		</offsets>

		<attach>world</attach>

		<placer>
			<type>point</type>
		</placer>

		<condition>
			<property>sim/model/ch53e/particles/enabled</property>
			<not>
				<property>sim/paused</property>
			</not>
			<not>
				<property>sim/crashed</property>
			</not>
			<less-than>
				<property>position/altitude-agl-ft</property>
				<value>100</value>
			</less-than>
			<greater-than>
				<property>rotors/main/rpm</property>
				<value>150</value>
			</greater-than>
		</condition>

		<shooter>
			<theta-min-deg>0</theta-min-deg>
			<theta-max-deg>360</theta-max-deg>
			<phi-min-deg>-0.1</phi-min-deg>
			<phi-max-deg>0.1</phi-max-deg>
			<speed-mps>
				<property>rotors/main/rpm</property>
				<factor>0.1</factor>
				<spread>6</spread>
			</speed-mps>
			<rotation-speed>
				<x-min-deg-sec>0</x-min-deg-sec>
				<y-min-deg-sec>0</y-min-deg-sec>
				<z-min-deg-sec>0</z-min-deg-sec>
				<x-max-deg-sec>0</x-max-deg-sec>
				<y-max-deg-sec>0</y-max-deg-sec>
				<z-max-deg-sec>0</z-max-deg-sec>
			</rotation-speed>
		</shooter>

		<counter>
			<particles-per-sec>
				<property>position/altitude-agl-ft</property>
				<factor>-40</factor>
				<offset-m>2000</offset-m>
			</particles-per-sec>
		</counter>

		<align>billboard</align>

		<particle>
			<start>
				<color>
					<red>
						<value>0.6</value>
					</red>
					<green>
						<value>0.6</value>
					</green>
					<blue>
						<value>0.6</value>
					</blue>
					<alpha>
						<property>rotors/main/rpm</property>
						<factor>0.00004</factor>
						<max>0.02</max>
					</alpha>
				</color>
				<size>
					<value>0.8</value>
				</size>
			</start>

			<end>
				<color>
					<red>
						<value>0.6</value>
					</red>
					<green>
						<value>0.6</value>
					</green>
					<blue>
						<value>0.6</value>
					</blue>
					<alpha>
						<property>rotors/main/rpm</property>
						<factor>0.0002</factor>
						<max>0.04</max>
					</alpha>
				</color>
				<size>
					<value>0.8</value>
				</size>
			</end>

			<life-sec>
				<value>0.37</value>
			</life-sec>
			<mass-kg>0.01</mass-kg>
			<radius-m>0.00001</radius-m>
		</particle>

		<program>
			<fluid>water</fluid>
			<gravity>true</gravity>
			<wind>false</wind>
		</program>
	</particlesystem>
	
<!--== lights ==-->
<model>
		<path>Aircraft/ch53e/Models/Lights/LightPack.xml</path>
	</model>
	
		<!-- Ramp Animation -->
	
	 <animation>
    <type>rotate</type>
    <object-name>BayDoorL</object-name>
	 <object-name>SP</object-name>
	 
    <property>instrumentation/doors/ramp/position-norm</property>
    <factor> 37.12 </factor>
    <center>
      <x-m>4.91</x-m>
      <y-m>  0.000 </y-m>
      <z-m> -0.65 </z-m>
    </center>
    <axis>
      <x> 0 </x>
      <y> 1 </y>
      <z> 0 </z>
    </axis>
  </animation>
  
  <animation>
		<type>rotate</type>
		 <object-name>SP</object-name>
		  <property>instrumentation/doors/ramp/position-norm</property>
		<interpolation>
			<entry><ind>0.0</ind><dep>0</dep></entry>
			<entry><ind>0.2</ind><dep>0.0</dep></entry>
			<entry><ind>0.8</ind><dep>-110.0</dep></entry>
			<!--<entry><ind>0.1</ind><dep>-90.0</dep></entry>-->
		</interpolation> 
		
		<!--
		33.1215	-1.5748	2.31984
		33.1215	-1.5748	2.20398
		-->
 		<axis>
  			<x1-m>6.9</x1-m>
  			<y1-m>0.95</y1-m>
  			<z1-m>0.2</z1-m>
  			<x2-m>6.9</x2-m>
  			<y2-m>-0.95</y2-m>
  			<z2-m>0.2</z2-m>
 		</axis>
	</animation>
  
   <animation>
    <type>rotate</type>
    <object-name>BayDoorUP</object-name>
	 <object-name>BayDoorGL</object-name>
	 
    <property>instrumentation/doors/ramp/position-norm</property>
    <factor> 31.12 </factor>
    <center>
      <x-m>9.124</x-m>
      <y-m>  0.000 </y-m>
      <z-m>1.1</z-m>
    </center>
    <axis>
      <x> 0 </x>
      <y> 1 </y>
      <z> 0 </z>
    </axis>
  </animation>
  
  
 

</PropertyList>

